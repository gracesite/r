<!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #DD4422">&#39;&#39;&#39;</span>
<span style="color: #DD4422">standard dictionary has setdefault() for setting a default value </span>
<span style="color: #DD4422">if the value not exist.  example:</span>
<span style="color: #DD4422">    d.get(key, -99) # -99 is the deafult value if key does not exsit in d</span>
<span style="color: #DD4422">    d.setdefault(key,[]).append(v) # if not exist, create a empty list [], </span>
<span style="color: #DD4422">    and append to it</span>

<span style="color: #DD4422">collections.defaultdict lets the caller specify the default up front when </span>
<span style="color: #DD4422">the container is initialized.</span>
<span style="color: #DD4422">&#39;&#39;&#39;</span>

<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">collections</span>
<span style="color: #888888"># example 1</span>
<span style="color: #008800; font-weight: bold">print</span>(<span style="background-color: #fff0f0">&#39;===&gt;&gt;&gt; example1: standard dictionary &#39;</span>)
arr <span style="color: #333333">=</span> [(<span style="background-color: #fff0f0">&#39;yellow&#39;</span>, <span style="color: #0000DD; font-weight: bold">1</span>), (<span style="background-color: #fff0f0">&#39;blue&#39;</span>, <span style="color: #0000DD; font-weight: bold">2</span>), (<span style="background-color: #fff0f0">&#39;yellow&#39;</span>, <span style="color: #0000DD; font-weight: bold">3</span>), (<span style="background-color: #fff0f0">&#39;blue&#39;</span>, <span style="color: #0000DD; font-weight: bold">4</span>), (<span style="background-color: #fff0f0">&#39;red&#39;</span>, <span style="color: #0000DD; font-weight: bold">1</span>)]
d <span style="color: #333333">=</span> {}
<span style="color: #008800; font-weight: bold">for</span> k,v <span style="color: #000000; font-weight: bold">in</span> arr:
  d<span style="color: #333333">.</span>setdefault(k,[])<span style="color: #333333">.</span>append(v)
<span style="color: #008800; font-weight: bold">print</span>(<span style="background-color: #fff0f0">&#39;sort-by-key:&#39;</span>,<span style="color: #007020">sorted</span>(d<span style="color: #333333">.</span>items(), key<span style="color: #333333">=</span><span style="color: #008800; font-weight: bold">lambda</span> x:x[<span style="color: #0000DD; font-weight: bold">0</span>]))
<span style="color: #008800; font-weight: bold">print</span>(<span style="background-color: #fff0f0">&#39;sort-by-value:&#39;</span>,<span style="color: #007020">sorted</span>(d<span style="color: #333333">.</span>items(), key<span style="color: #333333">=</span><span style="color: #008800; font-weight: bold">lambda</span> x:x[<span style="color: #0000DD; font-weight: bold">1</span>]))
<span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">my_default_factory</span>():
    <span style="color: #008800; font-weight: bold">return</span> []

<span style="color: #888888"># example 2</span>
<span style="color: #008800; font-weight: bold">print</span>(<span style="background-color: #fff0f0">&#39;===&gt;&gt;&gt; example 2: collections defaultdict&#39;</span>)
arr <span style="color: #333333">=</span> [(<span style="background-color: #fff0f0">&#39;yellow&#39;</span>, <span style="color: #0000DD; font-weight: bold">1</span>), (<span style="background-color: #fff0f0">&#39;blue&#39;</span>, <span style="color: #0000DD; font-weight: bold">2</span>), (<span style="background-color: #fff0f0">&#39;yellow&#39;</span>, <span style="color: #0000DD; font-weight: bold">3</span>), (<span style="background-color: #fff0f0">&#39;blue&#39;</span>, <span style="color: #0000DD; font-weight: bold">4</span>), (<span style="background-color: #fff0f0">&#39;red&#39;</span>, <span style="color: #0000DD; font-weight: bold">1</span>)]

d <span style="color: #333333">=</span>collections<span style="color: #333333">.</span>defaultdict(my_default_factory,{}) <span style="color: #888888">#set default upfront</span>
<span style="color: #008800; font-weight: bold">for</span> k,v <span style="color: #000000; font-weight: bold">in</span> arr:
    d[k]<span style="color: #333333">.</span>append(v)
<span style="color: #008800; font-weight: bold">print</span>(<span style="background-color: #fff0f0">&#39;sort-by-key:&#39;</span>,<span style="color: #007020">sorted</span>(d<span style="color: #333333">.</span>items(), key<span style="color: #333333">=</span><span style="color: #008800; font-weight: bold">lambda</span> x:x[<span style="color: #0000DD; font-weight: bold">0</span>]))
<span style="color: #008800; font-weight: bold">print</span>(<span style="background-color: #fff0f0">&#39;sort-by-value:&#39;</span>,<span style="color: #007020">sorted</span>(d<span style="color: #333333">.</span>items(), key<span style="color: #333333">=</span><span style="color: #008800; font-weight: bold">lambda</span> x:x[<span style="color: #0000DD; font-weight: bold">1</span>]))


<span style="color: #888888">#===&gt;&gt;&gt; example1: standard dictionary </span>
<span style="color: #888888">#sort-by-key: [(&#39;blue&#39;, [2, 4]), (&#39;red&#39;, [1]), (&#39;yellow&#39;, [1, 3])]</span>
<span style="color: #888888">#sort-by-value: [(&#39;red&#39;, [1]), (&#39;yellow&#39;, [1, 3]), (&#39;blue&#39;, [2, 4])]</span>
<span style="color: #888888">#===&gt;&gt;&gt; example 2: collections defaultdict</span>
<span style="color: #888888">#sort-by-key: [(&#39;blue&#39;, [2, 4]), (&#39;red&#39;, [1]), (&#39;yellow&#39;, [1, 3])]</span>
<span style="color: #888888">#sort-by-value: [(&#39;red&#39;, [1]), (&#39;yellow&#39;, [1, 3]), (&#39;blue&#39;, [2, 4])]</span>
</pre></td></tr></table></div>

